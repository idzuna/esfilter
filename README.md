# ESFilter

- 画像の自動分類・文字認識を行います
- ウェブサーバーとして動作し，ウェブブラウザ上から画像の閲覧やアプリケーションの操作が行えます

## 注意

- このソフトウェアはウェブサーバーとして動作しますが，セキュリティを考慮して作っていないので，悪意のある人間から見える場所で動かさないでください
- Internet Explorer では動きません

## インストールと実行

1. node.js をインストール https://nodejs.org/  
（2019/11/13 現在の最新推奨版 12.13.0 LTS で動作確認しています）
1. ソースコードをダウンロードし最上位ディレクトリ（package.json があるディレクトリ）で以下を実行
    ```
    > npm install
    > npx tsc
    > npx webpack
    ```
1. ポートを指定して起動
    ```
    > set PORT=80
    > node esfilter
    ```

## 使い方

1. 起動後作成される images/@unclassified ディレクトリに分類したい画像を入れておきます
1. ESFilter が動作しているポートをウェブブラウザから開きます
1. 「フィルター設定」＞「フィルター一覧」＞「新規作成」を押し，適当なフィルター名を入力します
1. フィルターのパラメーターを入力します
    - 条件は必要な数だけ追加でき，すべての条件を満たした画像（AND 条件）が，フィルターにヒットしたとみなされます
    - OR 条件は指定できません．指定したい場合は必要な数だけ別にフィルターを作成してください
1. 上記を繰り返して必要な数だけフィルターを作成します
1. 個々のフィルターの自動実行を有効にします
1. 全体の自動実行を有効にすると分類が開始されます
    - 結果はログから確認できます
    - どのフィルターにもヒットしなかった画像は @unmatched フォルダーへ移動されます
    - さきに個々の自動実行を有効にしてから全体を有効にしないと，ヒットするフィルターがなかったとして，画像が @unmatched フォルダーに移動されてしまいます

## 更新履歴

- 0.2.0 - 2019/11/19 - 検索機能の追加
- 0.1.0 - 2019/11/17 - 文字認識機能の追加
- 0.0.1 - 2019/11/13 - 公開
